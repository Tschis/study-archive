<!--

    The MIT License
    Copyright (c) 2017 Rodolfo Forte

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in
    all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
    THE SOFTWARE.

-->
<!DOCTYPE html>
<html>
  <head>
    <title>Java Collections</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
	  
	  blockquote {
		border-left: 0.3em solid rgba(0,0,0,0.5);
		padding: 0 15px;
		font-style: italic;
	  }
	  
	  img {
		max-width:100%;
	  }

	  .red {
		color: red;
	  }
	  
	  .green {
		color: green;
	  }
	  
	  .footnote {
		font-style: italic;
		font-size: 14px;
	  }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Java Collections

---

# Main interfaces / Common implementations 

.center[![java-collection-hierarchy](java-collection-hierarchy.jpeg)]

---

# Set

* A collection that contains no duplicate elements and at most one null element;

* All constructors must create a set that contains no duplicate elements;

* Some set implementations have restrictions on the elements that they may contain:
  * Some implementations prohibit null elements;
  * Some have restrictions on the types of their elements;
  
* Common implementations:
  * HashSet
  * TreeSet 
  
---

# TreeSet

* Based on a TreeMap;

* Not synchronized;

* Elements are ordered using their natural ordering, or by a Comparator provided at set creation time;

* Provides guaranteed log(n) time cost for the basic operations (add, remove and contains);

---

# HashSet

* Backed by a HashMap instance;

* Permits the null element;

* Not synchronized;

* Makes no guarantees as to the iteration order of the set; 
  * In particular, it does not guarantee that the order will remain constant over time;

* Offers constant time performance for the basic operations (add, remove, contains and size);

---

# LinkedHashSet

* Hash table and linked list implementation of the Set interface, with predictable iteration order;

* Permits the null element;

* Not synchronized;

* Differs from HashSet because it maintains a doubly-linked list running through all of its entries, so it maintains insertion-order;

* Provides constant-time performance for the basic operations (add, contains and remove);

---

# List

* An ordered collection (a sequence);

* The user has precise control over where in the list each element is inserted, and can access elements by their index (position), or search for elements in the list;

* Unlike sets, lists typically allow duplicate elements, including multiple null elements;

* Some list implementations have restrictions on the elements that they may contain:
  * Some implementations prohibit null elements;
  * Some have restrictions on the types of their elements;

* Common implementations:
  * ArrayList
  * LinkedList
  * Vector

---

# Vector

* Implements a growable array of objects. Like an array, it contains components that can be accessed using an integer index;

* The size of a Vector can grow or shrink as needed to accommodate adding and removing items after the Vector has been created;

* Tries to optimize storage management by maintaining a capacity and a capacityIncrement;
  * The capacity is always at least as large as the vector size; 
  * It is usually larger because, as components are added to the vector, the storage increases in chunks the size of capacityIncrement;
  
* Unlike the new collection implementations, Vector is synchronized;
  * If a thread-safe implementation is not needed, it is recommended to use ArrayList;

---

# ArrayList

* Is roughly equivalent to Vector, except that it is not synchronized;

* Operations size, isEmpty, get, set, iterator, and listIterator run in constant time;
  * The add operation runs in amortized constant time;
  * All of the other operations run in linear time (roughly);	

---

# LinkedList

* Doubly-linked list implementation of the List and Deque interfaces;

* Not synchronized;

* Implements all optional list operations, and permits all elements (including null);

<br />

.center[![610px-Doubly-linked-list](610px-Doubly-linked-list.png)]

---

class: center, middle

# Comparisons 

---

# ArrayList vs LinkedList

* LinkedList implements List with a [doubly-linked list](https://en.wikipedia.org/wiki/Doubly_linked_list):
  * allows for constant-time insertions or removals using iterators;
  
  * only sequential access of elements;
  
  * you can walk the list forwards or backwards, but finding a position in the list takes time proportional to the size of the list;

* ArrayList implements List with a dynamically re-sizing array:
  * allows fast random read access, grabbing elements in constant time;
  
  * adding/removing from anywhere but the end requires shifting all the latter elements over, either to make an opening or fill the gap;
  
  * while adding more elements than the capacity of the underlying array, a new array (1.5 times the size) is allocated;
		* the old array is copied to the new one;
		* adding to ArrayList is O(n) in worst case, constant on average;

---

# ArrayList vs LinkedList

* For LinkedList<E>:

  * get(int index) is O(n) average;
  
  * .green[add(E element) is O(1);]
  
  * add(int index, E element) is O(n) average;
		
  * remove(int index) is O(n) average;
  
  * .green[Iterator.remove() is O(1);]
  
  * .green[ListIterator.add(E element) is O(1);]
  
---

# ArrayList vs LinkedList

* For ArrayList<E>

  * .green[get(int index) is O(1);]
  
  * add(E element) is O(1) amortized;
      * O(n) worst-case, since the array must be resized and copied;
	  
  * add(int index, E element) is O(n) average;
  
  * remove(int index) is O(n) average;
  
  * Iterator.remove() is O(n) average;
  
  * ListIterator.add(E element) is O(n) average;

---

# ArrayList vs LinkedList

* Complexity

<br />

.center[![complexity arraylist vs linkedlist](complexity-arraylist-vs-linkedlist.png)]

---

# ArrayList vs LinkedList

* Iterating:
  * Both are practically equally cheap;

* Seeking:
  * LinkedList follows the links in O(n) for worst case;
  * ArrayList can compute the desired position and access it in O(1);
  
* Adding/Removing:
  * LinkedList: 
		* When reusing existing iterators, operations can be done in O(1) by changing the list locally only;
		* Otherwise, operations are O(n) (except at the head);
		
  * ArrayList: O(n), since the remainder of the array needs to be moved;

---

# Credits

* [Oracle - Collections Framework Overview](https://docs.oracle.com/javase/8/docs/technotes/guides/collections/index.html)
* [StackOverflow](https://stackoverflow.com)
  * [When to use LinkedList over ArrayList?](https://stackoverflow.com/a/322742/7976727)
  * [What are the time complexities of various data structures?](https://stackoverflow.com/a/7294635/7976727)
* [Big-O Cheat Sheet](http://bigocheatsheet.com/)
* [Wikipedia - Doubly Linked List](https://en.wikipedia.org/wiki/Doubly_linked_list)

    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>